# =========================
# .env (production template)
# =========================
# This file is shared by backend + workers (docker-compose uses env_file: [.env])

# -------------------------
# App / General
# -------------------------
# Your Settings uses lowercase names (as in your code), so keep them lowercase.
debug=false
database_echo=false
cors_origins=["*"]

# Security (CHANGE THESE!)
secret_key=CHANGE_ME_TO_A_LONG_RANDOM_SECRET
algorithm=HS256
access_token_expire_minutes=30

# -------------------------
# Database (required by Settings)
# NOTE: host/port are overridden in compose to use service names (postgres/5432),
# but keeping them here is fine too.
# -------------------------
database_driver=postgresql+asyncpg
database_username=admin
database_password=CHANGE_ME_STRONG
database_host=postgres
database_port=5432
database_database=sampledb

# (Used by the postgres container itself)
POSTGRES_USER=admin
POSTGRES_PASSWORD=CHANGE_ME_STRONG
POSTGRES_DB=sampledb

# -------------------------
# Redis (required by Settings fields exist; password optional in your code)
# -------------------------
redis_host=redis
redis_port=6379
redis_password=
redis_db=0
default_ttl=60

# -------------------------
# S3 / MinIO
# -------------------------
# MinIO credentials for the minio container
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=CHANGE_ME_STRONG

# App S3 config (internal endpoint in docker network)
S3_BUCKET=app-bucket
s3_endpoint=http://minio:9000
s3_region=us-east-1
s3_bucket=app-bucket
s3_access_key=minioadmin
s3_secret_key=CHANGE_ME_STRONG
s3_use_ssl=false
s3_path_style=true

# "Public" base URL = what external clients would use to fetch objects.
# If you only access MinIO internally, you can keep it internal or leave it as localhost.
s3_public_base_url=http://localhost:9000/app-bucket
s3_presign_ttl=300

# -------------------------
# Telegram (required by Settings)
# -------------------------
telegram_api_id=123456
telegram_api_hash=PUT_YOUR_TELEGRAM_API_HASH_HERE
telegram_proxy_url=

# -------------------------
# WhatsApp (required by Settings)
# -------------------------
whatsapp_base_url=http://evolution_api:8080
whatsapp_api_key=PUT_YOUR_WHATSAPP_API_KEY_HERE

# -------------------------
# Backend runtime
# -------------------------
WEB_CONCURRENCY=2

# -------------------------
# Worker tuning (per-worker overrides used by docker-compose)
# -------------------------
DELIVER_SCHEDULED_MESSAGES_INTERVAL_SECONDS=5
DELIVER_SCHEDULED_MESSAGES_BATCH_SIZE=20

GENERATE_MESSAGES_FROM_REQUESTS_CSV_INTERVAL_SECONDS=10
GENERATE_MESSAGES_FROM_REQUESTS_CSV_BATCH_SIZE=5

# -------------------------
# Evolution API database URI (only if you want it configurable via .env)
# If you use this, ensure postgres_init creates evo_db + evo_user.
# -------------------------
EVOLUTION_DATABASE_URI=postgresql://evo_user:evo_pass@postgres:5432/evo_db?schema=public
EVOLUTION_SERVER_URL=http://localhost:8080

# -------------------------
# RabbitMQ / Event Bus (optional - set broker_driver=none to disable)
# -------------------------
# Dispatch strategy: direct (DB workers call handlers) or broker (publish to RabbitMQ)
outbox_dispatch_strategy=direct

# Broker driver: none, rabbitmq (future: kafka)
broker_driver=none
broker_url=amqp://guest:guest@rabbitmq:5672/

# RabbitMQ exchange settings
broker_exchange=events
broker_exchange_type=topic

# Consumer queue settings
broker_queue=messenger.events
broker_routing_key=#
broker_prefetch=50
broker_durable=true

# RabbitMQ credentials (for container)
RABBITMQ_USER=guest
RABBITMQ_PASS=guest

